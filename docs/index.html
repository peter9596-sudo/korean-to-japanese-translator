<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Barun+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <title>Korean to Japanese Translator</title>
    <style>
      body {
        margin: 0;
        font-family: 'Nanum Barun Gothic', sans-serif;
        background: #ffffff;
        color: #222;
      }
      #app {
        max-width: 640px;
        margin: 0 auto;
        padding: 2rem 1.25rem 2.5rem;
        text-align: center;
      }
      h1 {
        margin: 0 0 1.5rem;
        font-size: 1.6rem;
        font-weight: 700;
      }
      textarea {
        width: 100%;
        height: 110px;
        margin-bottom: 1rem;
        font-family: 'Nanum Barun Gothic', sans-serif;
        border-radius: 10px;
        background-color: #f8f9fa;
        border: 1px solid #ddd;
        padding: 0.75rem;
        font-size: 1rem;
        box-sizing: border-box;
        resize: vertical;
      }
      button {
        padding: 0.65rem 1.25rem;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
      }
      button:hover {
        background-color: #0056b3;
      }
      #output {
        margin-top: 1rem;
        padding: 1rem;
        border: 1px solid #ddd;
        min-height: 60px;
        border-radius: 10px;
        background-color: #f8f9fa;
        color: #999;
        text-align: left;
        line-height: 1.5;
        white-space: pre-line;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h1>üá∞üá∑‚û°Ô∏èüáØüáµ Korean to Japanese Translator for ÌòúÏßÑ ‚ù§Ô∏è</h1>
      <textarea id="input" placeholder="ex) ÏÇ¨ÎûëÌï¥"></textarea>
      <button id="translate">Translate</button>
      <div id="output">ex) ÊÑõ„Åó„Å¶„ÅÑ„Çã (Ai shite iru)</div>
    </div>
    <script>
      function numberToJapanese(num) {
        if (num === 0) return '„Çå„ÅÑ';
        const units = ['', '„ÅÑ„Å°', '„Å´', '„Åï„Çì', '„Çà„Çì', '„Åî', '„Çç„Åè', '„Å™„Å™', '„ÅØ„Å°', '„Åç„ÇÖ„ÅÜ'];
        const tens = ['', '„Åò„ÇÖ„ÅÜ', '„Å´„Åò„ÇÖ„ÅÜ', '„Åï„Çì„Åò„ÇÖ„ÅÜ', '„Çà„Çì„Åò„ÇÖ„ÅÜ', '„Åî„Åò„ÇÖ„ÅÜ', '„Çç„Åè„Åò„ÇÖ„ÅÜ', '„Å™„Å™„Åò„ÇÖ„ÅÜ', '„ÅØ„Å°„Åò„ÇÖ„ÅÜ', '„Åç„ÇÖ„ÅÜ„Åò„ÇÖ„ÅÜ'];
        const hundreds = ['', '„Å≤„ÇÉ„Åè', '„Å´„Å≤„ÇÉ„Åè', '„Åï„Çì„Å≥„ÇÉ„Åè', '„Çà„Çì„Å≤„ÇÉ„Åè', '„Åî„Å≤„ÇÉ„Åè', '„Çç„Å£„Å¥„ÇÉ„Åè', '„Å™„Å™„Å≤„ÇÉ„Åè', '„ÅØ„Å£„Å¥„ÇÉ„Åè', '„Åç„ÇÖ„ÅÜ„Å≤„ÇÉ„Åè'];
        const thousands = ['', '„Åõ„Çì', '„Å´„Åõ„Çì', '„Åï„Çì„Åú„Çì', '„Çà„Çì„Åõ„Çì', '„Åî„Åõ„Çì', '„Çç„Åè„Åõ„Çì', '„Å™„Å™„Åõ„Çì', '„ÅØ„Å£„Åõ„Çì', '„Åç„ÇÖ„ÅÜ„Åõ„Çì'];
        let result = '';
        let n = Math.abs(num);
        if (n >= 1000) {
          const t = Math.floor(n / 1000);
          result += thousands[t % 10];
          n %= 1000;
        }
        if (n >= 100) {
          const h = Math.floor(n / 100);
          result += hundreds[h % 10];
          n %= 100;
        }
        if (n >= 10) {
          const te = Math.floor(n / 10);
          result += tens[te % 10];
          n %= 10;
        }
        if (n > 0) {
          result += units[n];
        }
        return result || '„Çå„ÅÑ';
      }

      function hiraganaToHepburn(hira) {
        const map = {
          '„ÅÇ': 'a', '„ÅÑ': 'i', '„ÅÜ': 'u', '„Åà': 'e', '„Åä': 'o',
          '„Åã': 'ka', '„Åç': 'ki', '„Åè': 'ku', '„Åë': 'ke', '„Åì': 'ko',
          '„Åï': 'sa', '„Åó': 'shi', '„Åô': 'su', '„Åõ': 'se', '„Åù': 'so',
          '„Åü': 'ta', '„Å°': 'chi', '„Å§': 'tsu', '„Å¶': 'te', '„Å®': 'to',
          '„Å™': 'na', '„Å´': 'ni', '„Å¨': 'nu', '„Å≠': 'ne', '„ÅÆ': 'no',
          '„ÅØ': 'ha', '„Å≤': 'hi', '„Åµ': 'fu', '„Å∏': 'he', '„Åª': 'ho',
          '„Åæ': 'ma', '„Åø': 'mi', '„ÇÄ': 'mu', '„ÇÅ': 'me', '„ÇÇ': 'mo',
          '„ÇÑ': 'ya', '„ÇÜ': 'yu', '„Çà': 'yo',
          '„Çâ': 'ra', '„Çä': 'ri', '„Çã': 'ru', '„Çå': 're', '„Çç': 'ro',
          '„Çè': 'wa', '„Çí': 'wo', '„Çì': 'n',
          '„Åå': 'ga', '„Åé': 'gi', '„Åê': 'gu', '„Åí': 'ge', '„Åî': 'go',
          '„Åñ': 'za', '„Åò': 'ji', '„Åö': 'zu', '„Åú': 'ze', '„Åû': 'zo',
          '„Å†': 'da', '„Å¢': 'ji', '„Å•': 'zu', '„Åß': 'de', '„Å©': 'do',
          '„Å∞': 'ba', '„Å≥': 'bi', '„Å∂': 'bu', '„Åπ': 'be', '„Åº': 'bo',
          '„Å±': 'pa', '„Å¥': 'pi', '„Å∑': 'pu', '„Å∫': 'pe', '„ÅΩ': 'po',
          '„ÇÉ': 'ya', '„ÇÖ': 'yu', '„Çá': 'yo', '„Å£': 'tsu', '„Éº': '-'
        };
        return hira.replace(/[„ÅÅ-„Çñ]/g, c => map[c] || c);
      }

      const input = document.getElementById('input');
      const output = document.getElementById('output');
      const button = document.getElementById('translate');

      // Í∏∞Î≥∏Í∞í ÏÑ∏ÌåÖ
      document.querySelector('h1').innerHTML = 'üá∞üá∑‚û°Ô∏èüáØüáµ Korean to Japanese Translator for ÌòúÏßÑ ‚ù§Ô∏è';
      input.placeholder = 'ex) ÏÇ¨ÎûëÌï¥';
      output.innerHTML = 'ex) ÊÑõ„Åó„Å¶„ÅÑ„Çã (Ai shite iru)';
      output.style.color = '#999';

      input.addEventListener('keydown', (event) => {
        if (event.key === 'Enter' && !event.shiftKey) {
          event.preventDefault();
          button.click();
        }
      });

      button.addEventListener('click', async () => {
        const text = input.value.trim();
        if (!text) return;

        try {
          const response = await fetch('https://translate.googleapis.com/translate_a/single?client=gtx&sl=ko&tl=ja&dt=t&dt=rm&q=' + encodeURIComponent(text));
          const data = await response.json();
          const translation = data[0][0][0];
          const romanization = data[0][1] ? data[0][1][2] : '';
          let displayTranslation = translation.replace(/\d+/g, (match) => numberToJapanese(parseInt(match)));
          let displayRomanization = hiraganaToHepburn(romanization).replace(/\d+/g, (match) => numberToJapanese(parseInt(match)));
          output.innerHTML = displayTranslation + (displayRomanization ? `\n(${displayRomanization})` : '');
          output.style.color = '#000';
        } catch (error) {
          output.textContent = 'Translation failed: ' + error.message;
          output.style.color = '#c00';
        }
      });
    </script>
  </body>
</html>